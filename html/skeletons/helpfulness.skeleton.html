{{! Slider template skeleton; use templater.py! }}

<style type="text/css">
label, input[type=radio], input[type=button] { cursor: pointer; }
.blue { color: blue; }
.red { color: red; }
.trial { padding: 15px 10px; }
.trial p, .trial table { padding-left: 50px; margin: 3px; }
.trial table { width: 400px; }
.trial tr td { width: 14%; text-align: center; }
.trial_number { float: left; font-size: 1.5em; font-weight: bold; display:inline-block; min-width:50px; }
#unanswered { font-weight: bold; font-size: 2em; color: black; background-color: red; margin: 0 auto; width: 500px; border: black 1px solid; padding: 10px; display:none; }
#answered { margin: 0 auto; width: 500px; border: black 1px solid; padding: 10px; display:none; }
.slider { width: 300px; margin: 0 10px; }
.example { background-color: #ccc; padding: 10px; }

</style>

<style type="text/css">
.slider-wrapper input {
  width: 300px;
  height: 20px;
  margin: 0;
  transform-origin: 75px 75px;
}
</style>

<p>Survey Code: <span class="blue">{{code}}</span></p>
<p class="red"><strong>PLEASE COMPLETE AT MOST ONE <span class="blue">{{code}}</span> SURVEY. YOU WILL NOT BE PAID FOR COMPLETING MORE THAN ONE SURVEY WITH THIS CODE.</strong></p>


<h1>Instructions</h1>
<p>This questionnaire presents {{total_number}} scenarios. <strong>Your task is to judge how helpful an answer is to a question about the scenario.</strong></p>
<p>This HIT should take about 10 minutes to complete.</p>
<p>You will receive a $1.50 bonus if your work is high quality (most people receive this bonus).</p>
<p>Don't worry if it's not completely clear how helpful the answer is. There is no right answer: We're only interested in <strong>your intuition</strong>.</p>
<p>You can indicate the helpfulness by dragging the slider between "NOT HELPFUL AT ALL" and "VERY HELPFUL".</p>
<p>Here is an example:</p>
<div class="example">
<div class="trial">
	<p><strong>Background: </strong>Your friend Aaron has gone to Paris on vacation. He's the kind of person who would rather sit in a cafe all day than go around visiting tourist sites. But he'll make an exception for the really unmissable sites.</p>
	<p><strong>You ask Aaron's friend Jess:</strong> Will Aaron go to the Eiffel Tower?</p>
	<p><strong>Jess answers:</strong> It's his tenth time visiting Paris.</p>
	<p><strong>How helpful is Jess's answer to the question at hand?</strong> Please indicate your answer using the slider.</p>
	<table><tr><td class='label'>NOT HELPFUL AT ALL</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response_example1"/></div>
		<div class="output"></div></td><td class='label'>VERY HELPFUL</td></tr>
	</table>
	<p>Jess's answer isn't as helpful as a simple "yes" or "no", but it's fairly helpful given that you already know that Aaron doesn't like being a tourist. So move the slider partway towards the right. </p>
</div></div>

<p>Here is another example:</p>
<div class="example">
<div class="trial">
	<p><strong>Background: </strong>You and your friend are looking for a seat in a crowded movie theater. You find a pair of seats that appear to be open.</p>
	<p><strong>You ask a man sitting in the row: </strong>Are these seats taken?</p>
	<p><strong>The man replies: </strong>I'm saving them for my friends.</p>
	<p><strong>How helpful was the man's answer to the question at hand?</strong></p>
	<table><tr><td class='label'>NOT HELPFUL AT ALL</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response_example2"/></div>
		<div class="output"></div></td><td class='label'>VERY HELPFUL</td></tr>
	</table>
	<p>Even though the man's response doesn't help you find a seat, it fully addressed the question at hand. So move the slider all the way to the right.</p>
</div></div>

<p>Here is another example:</p>
<div class="example">
<div class="trial">
	<p><strong>Background: </strong>You're ready to leave home for the day, and you haven't checked the weather. It's springtime, and the weather is warming up.</p>
	<p><strong>You ask your roommate: </strong>Do I need to wear a jacket?</p>
	<p><strong>Your roommate replies: </strong>There's a full moon tonight.</p>
	<p><strong>How helpful is your roommate's answer to the question at hand?</strong></p>
	<table><tr><td class='label'>NOT HELPFUL AT ALL</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response_example2"/></div>
		<div class="output"></div></td><td class='label'>VERY HELPFUL</td></tr>
	</table>
	<p>Your roommate's answer doesn't help you figure out if you need wear a jacket. So move the slider all or most of the way to the left. </p>
</div></div>

<p class="red"><strong>In order to get paid, please make sure that you answer all {{total_number}} questions.</strong></p>

<p class="left legal">
<strong><br>
<br>
<br>
LEGAL INFORMATION</strong>:<br>
<br>
By completing this survey you acknowledge that this is an academic survey conducted by NYU
researchers studying language. The survey is expected to take up to 5 minutes.
Information that could be used to identify you may be kept indefinitely, but will remain
confidential. Because of the nature of the study, the information we are collecting cannot be
deleted or otherwise forgotten and we may not be able to provide you with it. You will be paid if
you complete all parts of the survey.<br><br>

If you have any questions about the study, contact Lucas Champollion at
<a href="mailto:champollion@nyu.edu">champollion@nyu.edu</a>. If you have any questions about your rights as a research subject,
contact the NYU IRB at <a href="mailto:ask.humansubjects@nyu.edu">ask.humansubjects@nyu.edu</a>
(or <a href="mailto:gdpr-info@nyu.edu">gdpr-info@nyu.edu</a> for participants in
Europe) Please reference the IRB protocol number -- IRB-FY2020-4913 -- when emailing.

</p><hr noshade="noshade" />
</p><hr noshade="noshade" />

<!--<p class="red"><strong>IF YOU HAVE ALREADY COMPLETED A <span class="blue">{{code}}</span> SURVEY, PLEASE STOP HERE. YOU WILL NOT BE PAID FOR COMPLETING MORE THAN ONE SURVEY WITH THIS CODE.</strong></p>-->

{{#items}}

<div class="trial count">
	<span class="trial_number">{{number}}.</span>
	<p><strong>Background: </strong>{{field_1}}</p>
	<p><strong>{{field_2}} </strong>{{field_3}}</p>
	<p><strong>{{field_4}} </strong>{{field_5}}</p>
	<p><strong>{{field_6}} </strong></p>
	<table><tr><td class='label'>NOT HELPFUL AT ALL</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response{{number}}"/></div>
		<div class="output"></div></td><td class='label'>VERY HELPFUL</td></tr>
	</table>
</div>
</div>

<hr noshade="noshade" />

{{/items}}

<h1>Exit Survey</h1>
<p>(None of your responses to these questions will affect the payment.)</p>

<p>Are you a native speaker of English? <label for="englishY"><input id="englishY" type="radio" name="english" value="1" /> Yes</label> <label for="englishN"><input id="englishN" type="radio" name="english" value="0" /> No</label></p>
<p>Do you speak a language other than English? <label for="foreignlangY"><input id="foreignlangY" type="radio" name="foreignlang" value="1" /> Yes</label> <label for="foreignlangN"><input id="foreignlangN" type="radio" name="foreignlang" value="0" /> No</label></p>

<div>
	<p>Did you notice any errors in this HIT or find anything unclear? If so, please provide more detail below.</p>
	<input type="text" id="issues" name="issues" size="100" /></span>
</div>
<br/>

<div>
	<p>Do you have any comments about this HIT?</p>
	<input type="text" id="comments" name="comments" size="100" /></span>
</div>
<br/>
<div id="unanswered">
	<span>&nbsp;</span> questions (out of {{total_number}} total) have been answered. If you submit now, you will not be paid.<br />
	<input type="button" value="HIGHLIGHT UNANSWERED QUESTIONS" id="highlight-button" />
</div>

<div id="answered">
	<span>&nbsp;</span> questions (out of {{total_number}} total) have been answered. You are ready to submit.
</div>
<h3 style="color: red; text-align:center;">After submitting this HIT, do NOT submit another HIT with survey code <span class="blue">{{code}}</span>. You will not be paid for completing more than one survey with this code.</h3>
<p><input type="hidden" name="numanswered" id="numanswered" /> <input type="hidden" name="useragent" id="useragent" /></p>

<script type='text/javascript'>

total_number = parseInt("{{total_number}}") || Infinity;

function count() {
	if ($(this).is('div'))
		$(this).closest('.count').addClass('touched').css('background','transparent');

	var num = $('.count.touched').length;

	$('#unanswered span, #answered span').text(num);
	$('#numanswered').val(num);

	if ( num < total_number ) {
		$('#unanswered').show();
		$('#answered').hide();
	} else {
		$('#unanswered').hide();
		$('#answered').show();
	}
}
$(count);

$(function() {
	$('#useragent').val(navigator.userAgent);
});

function highlight() {
	$('.count').css('background', 'yellow');
	$('.count.touched').css('background', 'transparent');
}
$('#highlight-button').click(highlight);

var link = new $.noUiSlider.Link({target: function(val) {$(this).siblings('input').val(val);}});
$(".slider").noUiSlider({
	range: { min: [0], max: [100] },
	start: [50],
	handles: 1,
	connect: "lower",
	serialization: {
		lower: [link],
		format: {decimals: 0}
	}
}).on('slide', count);
</script>
