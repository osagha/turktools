{{! Slider template skeleton; use templater.py! }}

<!--

This file contains code from the open-source noUiSlider project,
licensed under the following license:

Copyright Â© 2011-2014 Leon Gersen <leon.gersen@gmail.com>
This work is free. You can redistribute it and/or modify it under the
terms of the Do What The Fuck You Want To Public License, Version 2,
as published by Sam Hocevar. See http://www.wtfpl.net/ for more details.

http://refreshless.com/nouislider/
https://github.com/leongersen/noUiSlider/

-->

<style type="text/css">
label, input[type=radio], input[type=button] { cursor: pointer; }
.blue { color: blue; }
.red { color: red; }
.trial { padding: 15px 10px; }
.trial p, .trial table { padding-left: 50px; margin: 3px; }
.trial_number { float: left; font-size: 1.5em; font-weight: bold; display:inline-block; min-width:50px; }
#unanswered { font-weight: bold; font-size: 2em; color: black; background-color: red; margin: 0 auto; width: 500px; border: black 1px solid; padding: 10px; display:none; }
#answered { margin: 0 auto; width: 500px; border: black 1px solid; padding: 10px; display:none; }
.slider { width: 300px; margin: 0 10px; }
</style>

<!--<style type="text/css">-->
<!--/* begin noUiSlider css, licensed under WTFPL (see above) and modified */-->
<!--.noUi-target,.noUi-target *{-webkit-touch-callout:none;-webkit-user-select:none;-ms-touch-action:none;-ms-user-select:none;-moz-user-select:none;-moz-box-sizing:border-box;box-sizing:border-box}.noUi-base{width:100%;height:100%;position:relative}.noUi-origin{position:absolute;right:0;top:0;left:0;bottom:0}.noUi-handle{position:relative;z-index:1}.noUi-stacking .noUi-handle{z-index:10}.noUi-stacking+.noUi-origin{*z-index:-1}.noUi-state-tap .noUi-origin{-webkit-transition:left .3s,top .3s;transition:left .3s,top .3s}.noUi-state-drag *{cursor:inherit!important}.noUi-horizontal{height:18px}.noUi-horizontal .noUi-handle{width:20px;height:28px;left:-10px;top:-6px}.noUi-horizontal.noUi-extended{padding:0 15px}.noUi-horizontal.noUi-extended .noUi-origin{right:-15px}.noUi-background{background:#FAFAFA;box-shadow:inset 0 1px 1px #f0f0f0;}.noUi-connect{background:red;box-shadow:inset 0 0 3px rgba(51,51,51,.45);}.noUi-origin{border-radius:0px 2px 2px 0px}.noUi-target{border-radius:4px;border:1px solid #666;box-shadow:inset 0 1px 1px #F0F0F0,0 3px 6px -5px #BBB}.noUi-target.noUi-connect{box-shadow:inset 0 0 3px rgba(51,51,51,.20),0 3px 6px -5px #BBB}.noUi-dragable{cursor:col-resize}.noUi-handle{background:transparent;cursor:col-resize;}.noUi-active{background:transparent;}[disabled] .noUi-connect,[disabled].noUi-connect{background:#B8B8B8}[disabled] .noUi-handle{cursor:not-allowed}-->
<!--/* end noUiSlider js */-->
<!--</style>-->

<style type="text/css">
.slider-wrapper input {
  width: 300px;
  height: 20px;
  margin: 0;
  transform-origin: 75px 75px;
}
</style>

<p>Survey Code: <span class="blue">{{code}}</span></p>
<p class="red"><strong>PLEASE COMPLETE AT MOST ONE <span class="blue">{{code}}</span> SURVEY. YOU WILL NOT BE PAID FOR COMPLETING MORE THAN ONE SURVEY WITH THIS CODE.</strong></p>
<p><strong>This survey requires that your browser have <span class="red">JavaScript</span> enabled.</strong></p>

<h3>Instructions</h3>
<p>This questionnaire presents {{total_number}} English sentences. Your task is to decide how likely some possibility is in a given context. In most cases, there is not enough information to assign an exact probability to the possibility. This means that there is no right answer: We're only interested in <strong>your intuition</strong>. You can indicate how likely the possibility by dragging the slider between "Impossible" and "Certain". If a possibility seems very likely given the context, drag the slider to the right, towards "Certain." If a sentence sounds very unlikely, drag the slider to the left, towards "Impossible." As you move the slider, you can see how the percent chance of the possibility changes. Here is an example:</p>
<div class="trial">
	<p>Aaron is going to Paris on vacation. He's never been before, so he's excited to see the famous sites. How likely is it that Aaron will go to the Eiffel Tower?</p>

	<table><tr><td class='label'>IMPOSSIBLE</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response_example1"/></div>
		<div class="output"></div></td><td class='label'>CERTAIN</td></tr>
	</table>
	<p>The likelihood that Aaron will go to the Eiffel Tower is quite high, but not certain. So please slide the slider to the right until you are happy with the value that shows under the slider. </p>
</div>

<p>Here is another example:</p>
<div class="trial">
	<p>Lauren is getting dressed to go outside. It's December and she lives in Canada. How likely is it that Lauren will put on shorts?</p>
	<table><tr><td class='label'>IMPOSSIBLE</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response_example2"/></div>
		<div class="output"></div></td><td class='label'>CERTAIN</td></tr>
	</table>
	<p>The likelihood that Lauren will put on shorts is very low. So please slide the slider to the left until you are happy with the value that shows under the slider. </p>
</div>

<p class="red"><strong>In order to get paid, please make sure that you answer all {{total_number}} questions.</strong></p>
<p><strong>Consent Statement:</strong> ... </p>
<p>A counter will be displayed at the bottom of the page indicating how many questions have been answered. Please use this tool before submitting to ensure that all questions have been answered and you can receive payment.</p>
<hr noshade="noshade" />

{{#items}}

<div class="trial count">
	<span class="trial_number">{{number}}.</span>
	<p>{{field_1}}</p>
	<table><tr><td class='label'>IMPOSSIBLE</td><td>
		<div class="slider-wrapper"><input class="slider" type="range" min="0" max="1" value="0.5" step="0.0001" name="response{{number}}"/></div>
		<div class="output"></div></td><td class='label'>CERTAIN</td></tr>
	</table>
</div>

<hr noshade="noshade" />

{{/items}}

<p>Are you a native speaker of English? <label for="englishY"><input id="englishY" type="radio" name="english" value="1" /> Yes</label> <label for="englishN"><input id="englishN" type="radio" name="english" value="0" /> No</label></p>
<p>Do you speak a language other than English? <label for="foreignlangY"><input id="foreignlangY" type="radio" name="foreignlang" value="1" /> Yes</label> <label for="foreignlangN"><input id="foreignlangN" type="radio" name="foreignlang" value="0" /> No</label></p>
<p>(Your answers to these questions do not affect the payment.)</p>

<div id="unanswered">
	<span>&nbsp;</span> questions (out of {{total_number}} total) have been answered. If you submit now, you will not be paid.<br />
	<input type="button" value="HIGHLIGHT UNANSWERED QUESTIONS" id="highlight-button" />
</div>

<div id="answered">
	<span>&nbsp;</span> questions (out of {{total_number}} total) have been answered. You are ready to submit.
</div>
<h3 style="color: red; text-align:center;">After submitting this HIT, do NOT submit another HIT with survey code <span class="blue">{{code}}</span>. You will not be paid for completing more than one survey with this code.</h3>
<p><input type="hidden" name="numanswered" id="numanswered" /> <input type="hidden" name="useragent" id="useragent" /></p>

<script type='text/javascript'>

total_number = parseInt("{{total_number}}") || Infinity;

function count() {
	if ($(this).is('div'))
		$(this).closest('.count').addClass('touched').css('background','transparent');

	var num = $('.count.touched').length;

	$('#unanswered span, #answered span').text(num);
	$('#numanswered').val(num);

	if ( num < total_number ) {
		$('#unanswered').show();
		$('#answered').hide();
	} else {
		$('#unanswered').hide();
		$('#answered').show();
	}
}
$(count);

$(function() {
	$('#useragent').val(navigator.userAgent);
});

function highlight() {
	$('.count').css('background', 'yellow');
	$('.count.touched').css('background', 'transparent');
}
$('#highlight-button').click(highlight);

var link = new $.noUiSlider.Link({target: function(val) {$(this).siblings('input').val(val);}});
$(".slider").noUiSlider({
	range: { min: [0], max: [100] },
	start: [50],
	handles: 1,
	connect: "lower",
	serialization: {
		lower: [link],
		format: {decimals: 0}
	}
}).on('slide', count);
</script>


<script type="text/javascript">

var xs = document.getElementsByClassName('slider');
var ys = document.getElementsByClassName('output');
var i;
for (i = 0; i < xs.length; i++) {
	const x = xs[i]
	const y = ys[i]
	function updateOutput() {
	  y.innerText = (100/(1 + Math.pow((-1 + 1/x.value), 1.5))).toFixed(3) + "%";
	}
	updateOutput()
	xs[i].addEventListener('mousemove', updateOutput);

}

</script>